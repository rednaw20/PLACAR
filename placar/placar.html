<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Placar Beach Tennis</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@600&display=swap');

    :root {
      --fundo: #fffbe6;
      --texto: #222;
      --azul: #0077ff;
      --laranja: #ff7b00;
      --verde: #00c853;
      --sombra: rgba(0,0,0,0.15);
      --sacando: #000;
      --breakpoint: #d50000;
      --font: 'Barlow Condensed', sans-serif;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: var(--fundo);
      font-family: var(--font);
      color: var(--texto);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 1rem;
    }

    .placar {
      width: 100%;
      max-width: 900px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 16px var(--sombra);
      overflow: hidden;
      display: grid;
      grid-template-rows: auto auto 1fr auto;
    }

    .topo, .rodape {
      background: var(--azul);
      color: #fff;
      text-align: center;
      font-size: 1.2rem;
      padding: 0.5rem;
    }

    .linhas {
      display: grid;
      grid-template-rows: repeat(2, 1fr);
    }

    .linha {
      display: grid;
      grid-template-columns: 1fr 0.5fr 0.5fr 0.5fr;
      align-items: center;
      gap: 0.3rem;
      padding: 0.7rem;
      font-size: 1.5rem;
    }

    .linha:nth-child(odd) {
      background: #e0f7fa;
    }

    .nome {
      font-size: 1.4rem;
      font-weight: bold;
    }

    .ponto, .set {
      background: var(--laranja);
      color: white;
      padding: 0.5rem;
      border-radius: 6px;
      text-align: center;
      transition: all 0.3s;
    }

    .set {
      background: var(--verde);
    }

    .ativo {
      transform: scale(1.15);
    }

    .sacando::before {
      content: 'S';
      display: inline-block;
      margin-right: 6px;
      background: var(--sacando);
      color: white;
      font-size: 0.8rem;
      border-radius: 50%;
      width: 1.2rem;
      height: 1.2rem;
      text-align: center;
      line-height: 1.2rem;
    }

    .break {
      grid-column: 1 / -1;
      background: var(--breakpoint);
      color: white;
      font-weight: bold;
      text-align: center;
      animation: piscar 1s infinite;
    }

    @keyframes piscar {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
  </style>
</head>
<body>
  <div class="placar">
    <div class="topo" id="topo-texto">FINAL MASCULINA</div>

    <div class="linhas">
      <div class="linha" id="linha1">
        <div class="nome" id="nome1">DUPLA A</div>
        <div class="ponto" id="pontos1">0</div>
        <div class="set" id="set1">0</div>
        <div class="set" id="tb1"></div>
      </div>
      <div class="linha" id="linha2">
        <div class="nome" id="nome2">DUPLA B</div>
        <div class="ponto" id="pontos2">0</div>
        <div class="set" id="set2">0</div>
        <div class="set" id="tb2"></div>
      </div>
    </div>

    <div class="break" id="breakpoint" style="display: none;">BREAK POINT</div>

    <div class="rodape" id="rodape-texto">CIRCUITO ARENA BEACH 2025</div>
  </div>

  <script>
    const canal = new BroadcastChannel('beachTennisScore');

    const nome1 = document.getElementById('nome1');
    const nome2 = document.getElementById('nome2');
    const pontos1 = document.getElementById('pontos1');
    const pontos2 = document.getElementById('pontos2');
    const set1 = document.getElementById('set1');
    const set2 = document.getElementById('set2');
    const tb1 = document.getElementById('tb1');
    const tb2 = document.getElementById('tb2');
    const topoTexto = document.getElementById('topo-texto');
    const rodapeTexto = document.getElementById('rodape-texto');
    const breakpoint = document.getElementById('breakpoint');
    const linha1 = document.getElementById('linha1');
    const linha2 = document.getElementById('linha2');

    canal.onmessage = (e) => {
      const d = e.data;

      if (d.type === 'name') {
        if (d.team === 1) nome1.textContent = d.value;
        if (d.team === 2) nome2.textContent = d.value;
      }

      if (d.type === 'points') {
        if (d.team === 1) {
          pontos1.textContent = d.value;
          animar(pontos1);
        }
        if (d.team === 2) {
          pontos2.textContent = d.value;
          animar(pontos2);
        }
      }

      if (d.type === 'sets') {
        if (d.team === 1) {
          set1.textContent = d.value;
          animar(set1);
        }
        if (d.team === 2) {
          set2.textContent = d.value;
          animar(set2);
        }
      }

      if (d.type === 'tiebreak') {
        if (d.team === 1) tb1.textContent = d.value ? d.score : '';
        if (d.team === 2) tb2.textContent = d.value ? d.score : '';
      }

      if (d.type === 'serving') {
        nome1.classList.toggle('sacando', d.team === 1);
        nome2.classList.toggle('sacando', d.team === 2);
      }

      if (d.type === 'breakPoint') {
        breakpoint.style.display = d.value ? 'block' : 'none';
      }

      if (d.type === 'topText') topoTexto.textContent = d.value;
      if (d.type === 'bottomText') rodapeTexto.textContent = d.value;
    };

    function animar(elem) {
      elem.classList.add('ativo');
      setTimeout(() => elem.classList.remove('ativo'), 300);
    }
  </script>
</body>
</html>
