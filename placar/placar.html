<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scoreboard Profissional de TÃªnis</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Open+Sans:wght@400;700&display=swap');

    :root {
      --cor-fundo: #111;
      --cor-texto: #fff;
      --cor-primaria: #00ff88;
      --cor-secundaria: #222;
      --cor-destaque: #444;
      --cor-ativo: #ffaa00;
      --cor-tiebreak: #8b0000;
      --font-principal: 'Open Sans', sans-serif;
      --font-digito: 'Roboto Mono', monospace;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-principal);
      background-color: var(--cor-fundo);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 1rem;
      color: var(--cor-texto);
    }

    .placar {
      display: grid;
      grid-template-rows: repeat(4, auto);
      gap: 0.5rem;
      background: var(--cor-secundaria);
      padding: 1rem;
      border-radius: 12px;
      max-width: 900px;
      width: 100%;
      box-shadow: 0 0 20px #000a;
    }

    .top-info, .bottom-info {
      text-align: center;
      padding: 0.5rem;
      background-color: var(--cor-destaque);
      font-weight: bold;
      font-size: 1.2rem;
    }

    .linha {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr;
      gap: 0.5rem;
      align-items: center;
      padding: 0.5rem;
    }

    .jogador {
      background: #eee;
      color: #000;
      padding: 0.8rem;
      border-radius: 8px;
      font-weight: bold;
      font-size: 1.1rem;
    }

    .pontuacao, .sets {
      font-family: var(--font-digito);
      background: #000;
      color: var(--cor-primaria);
      font-size: 2rem;
      padding: 0.8rem;
      text-align: center;
      border-radius: 8px;
      transition: transform 0.2s, background 0.2s;
    }

    .pontuacao.ativo, .sets.ativo {
      background: var(--cor-ativo);
      color: #fff;
      transform: scale(1.1);
    }

    .linha.tie-break {
      background-color: var(--cor-tiebreak);
      animation: blink 1s infinite;
    }

    @keyframes blink {
      0% { opacity: 1; }
      50% { opacity: 0.6; }
      100% { opacity: 1; }
    }

    .info-extra {
      background: yellow;
      color: #000;
      padding: 0.5rem;
      text-align: center;
      font-weight: bold;
      display: none;
    }

    @media (max-width: 600px) {
      .linha {
        grid-template-columns: 1fr 1fr;
        grid-template-areas:
          "nome nome"
          "ponto set";
      }
      .jogador {
        grid-area: nome;
      }
    }
  </style>
</head>
<body>
  <div class="placar">
    <div class="top-info" id="categoria">Final Masculina - Open 2025</div>
    <div class="top-info" id="cronometro">00:00</div>

    <div class="linha" id="linha1">
      <div class="jogador" id="jogador1">DUPLA A</div>
      <div class="pontuacao" id="pontos1">0</div>
      <div class="sets" id="sets1">0</div>
    </div>
    <div class="linha" id="linha2">
      <div class="jogador" id="jogador2">DUPLA B</div>
      <div class="pontuacao" id="pontos2">0</div>
      <div class="sets" id="sets2">0</div>
    </div>

    <div class="info-extra" id="breakpoint">BREAK POINT</div>
    <div class="bottom-info" id="circuito">CAMPEONATO BRASILEIRO DE BEACH TENNIS 2025</div>
  </div>

  <script>
    let tempo = 0;
    let intervalo;

    const cronometro = document.getElementById('cronometro');
    const pontos1 = document.getElementById('pontos1');
    const pontos2 = document.getElementById('pontos2');
    const sets1 = document.getElementById('sets1');
    const sets2 = document.getElementById('sets2');
    const linha1 = document.getElementById('linha1');
    const linha2 = document.getElementById('linha2');
    const categoria = document.getElementById('categoria');
    const circuito = document.getElementById('circuito');
    const breakpoint = document.getElementById('breakpoint');
    const jogador1 = document.getElementById('jogador1');
    const jogador2 = document.getElementById('jogador2');

    function atualizarCronometro() {
      tempo++;
      const min = String(Math.floor(tempo / 60)).padStart(2, '0');
      const seg = String(tempo % 60).padStart(2, '0');
      cronometro.textContent = `${min}:${seg}`;
    }

    function iniciarCronometro() {
      intervalo = setInterval(atualizarCronometro, 1000);
    }

    function resetarCronometro() {
      clearInterval(intervalo);
      tempo = 0;
      cronometro.textContent = '00:00';
    }

    function animarTroca(elem) {
      elem.classList.add('ativo');
      setTimeout(() => elem.classList.remove('ativo'), 300);
    }

    function checarTieBreak() {
      const s1 = parseInt(sets1.textContent);
      const s2 = parseInt(sets2.textContent);
      const tie = s1 === 1 && s2 === 1;
      linha1.classList.toggle('tie-break', tie);
      linha2.classList.toggle('tie-break', tie);
    }

    pontos1.addEventListener('click', () => animarTroca(pontos1));
    pontos2.addEventListener('click', () => animarTroca(pontos2));
    sets1.addEventListener('click', () => {
      animarTroca(sets1);
      checarTieBreak();
    });
    sets2.addEventListener('click', () => {
      animarTroca(sets2);
      checarTieBreak();
    });

    const canal = new BroadcastChannel('beachTennisScore');

    canal.onmessage = (e) => {
      const d = e.data;
      if (d.type === 'name') {
        if (d.team === 1) jogador1.textContent = d.value;
        if (d.team === 2) jogador2.textContent = d.value;
      }
      if (d.type === 'points') {
        if (d.team === 1) pontos1.textContent = d.value;
        if (d.team === 2) pontos2.textContent = d.value;
        animarTroca(d.team === 1 ? pontos1 : pontos2);
      }
      if (d.type === 'sets') {
        if (d.team === 1) sets1.textContent = d.value;
        if (d.team === 2) sets2.textContent = d.value;
        checarTieBreak();
      }
      if (d.type === 'topText') categoria.textContent = d.value;
      if (d.type === 'bottomText') circuito.textContent = d.value;
      if (d.type === 'breakPoint') breakpoint.style.display = d.value ? 'block' : 'none';

      if (d.action === 'startTimer') iniciarCronometro();
      if (d.action === 'stopTimer') resetarCronometro();
    };
  </script>
</body>
</html>