<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Controle do Placar - Beach Tennis</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f0f0f0;
      margin: 0;
      padding: 20px;
    }

    h2 {
      margin-top: 0;
      text-align: center;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
    }

    .section {
      background: white;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 20px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    label {
      font-weight: bold;
      display: block;
      margin-bottom: 5px;
    }

    input[type="text"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 16px;
    }

    button {
      background-color: #007bff;
      color: white;
      padding: 12px;
      margin: 5px 0;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      width: 100%;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #0056b3;
    }

    .row {
      display: flex;
      gap: 10px;
    }

    .row button {
      flex: 1;
    }

    .green {
      background-color: #28a745;
    }

    .green:hover {
      background-color: #218838;
    }

    .red {
      background-color: #dc3545;
    }

    .red:hover {
      background-color: #c82333;
    }

    iframe {
      width: 100%;
      height: 250px;
      border: none;
      margin-bottom: 20px;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Placar Beach Tennis</h2>
    <iframe src="placar.html"></iframe>

    <div class="section">
      <label>Nome Dupla 1:</label>
      <input type="text" id="team1-name" value="DIDÁ / GESIENE" />

      <label>Nome Dupla 2:</label>
      <input type="text" id="team2-name" value="MATHEUS / ANA PAULA" />

      <label>Texto Superior:</label>
      <input type="text" id="top-text" value="FEMININO D" />

      <label>Texto Inferior:</label>
      <input type="text" id="bottom-text" value="CIRCUITO ARENA BEACH" />

      <button onclick="updateTexts()">Salvar Alterações</button>
    </div>

    <div class="section">
      <label>Saque:</label>
      <div class="row">
        <button class="green" onclick="sendMessage({ type: 'serving', team: 1 })">◄ Dupla 1</button>
        <button class="green" onclick="sendMessage({ type: 'serving', team: 2 })">Dupla 2 ►</button>
      </div>
    </div>

    <div class="section">
      <label>Pontuação Dupla 1:</label>
      <div class="row">
        <button onclick="sendPoints(1, 0)">0</button>
        <button onclick="sendPoints(1, 15)">15</button>
        <button onclick="sendPoints(1, 30)">30</button>
        <button onclick="sendPoints(1, 40)">40</button>
      </div>

      <label>Sets Dupla 1:</label>
      <div class="row">
        <button onclick="sendMessage({ type: 'sets', team: 1, change: 1 })">+ Set</button>
        <button onclick="sendMessage({ type: 'sets', team: 1, change: -1 })">- Set</button>
      </div>

      <label>Tiebreak:</label>
      <div class="row">
        <button onclick="sendMessage({ type: 'tiebreakPoint', team: 1, change: 1 })">+1</button>
        <button onclick="sendMessage({ type: 'tiebreakPoint', team: 1, change: -1 })">-1</button>
      </div>
    </div>

    <div class="section">
      <label>Pontuação Dupla 2:</label>
      <div class="row">
        <button onclick="sendPoints(2, 0)">0</button>
        <button onclick="sendPoints(2, 15)">15</button>
        <button onclick="sendPoints(2, 30)">30</button>
        <button onclick="sendPoints(2, 40)">40</button>
      </div>

      <label>Sets Dupla 2:</label>
      <div class="row">
        <button onclick="sendMessage({ type: 'sets', team: 2, change: 1 })">+ Set</button>
        <button onclick="sendMessage({ type: 'sets', team: 2, change: -1 })">- Set</button>
      </div>

      <label>Tiebreak:</label>
      <div class="row">
        <button onclick="sendMessage({ type: 'tiebreakPoint', team: 2, change: 1 })">+1</button>
        <button onclick="sendMessage({ type: 'tiebreakPoint', team: 2, change: -1 })">-1</button>
      </div>
    </div>

    <div class="section">
      <label>Controles:</label>
      <div class="row">
        <button class="green" onclick="sendMessage({ action: 'startTimer' })">Iniciar Cronômetro</button>
        <button class="red" onclick="sendMessage({ action: 'stopTimer' })">Zerar Cronômetro</button>
      </div>
      <div class="row">
        <button onclick="sendMessage({ action: 'resetGamePoints' })">Zerar Pontos</button>
        <button class="red" onclick="sendMessage({ action: 'resetScore' })">Zerar Tudo</button>
      </div>
    </div>
  </div>

  <script>
    const channel = new BroadcastChannel("beachTennisScore");

    function sendMessage(data) {
      console.log("Enviando:", data);
      channel.postMessage(data);
    }

    function sendPoints(team, value) {
      sendMessage({ type: "points", team, value });
    }

    function updateTexts() {
      sendMessage({ type: "name", team: 1, value: document.getElementById("team1-name").value });
      sendMessage({ type: "name", team: 2, value: document.getElementById("team2-name").value });
      sendMessage({ type: "topText", value: document.getElementById("top-text").value });
      sendMessage({ type: "bottomText", value: document.getElementById("bottom-text").value });
    }
  </script>
</body>
</html>
