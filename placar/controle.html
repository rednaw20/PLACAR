<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Placar Beach Tennis Colorido</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap');

    :root {
      --bg: #fefbd8;
      --cor1: #ff6f61;
      --cor2: #009688;
      --cor-txt: #333;
      --cor-txt-inv: #fff;
      --cor-set: #ffd54f;
      --cor-tiebreak: #f44336;
      --font: 'Rubik', sans-serif;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: var(--bg);
      font-family: var(--font);
      color: var(--cor-txt);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      padding: 1rem;
    }

    .placar {
      width: 100%;
      max-width: 900px;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      background: #fff;
      display: grid;
      grid-template-rows: auto auto 1fr auto;
      gap: 0.5rem;
    }

    .topo, .rodape {
      background: var(--cor1);
      color: var(--cor-txt-inv);
      text-align: center;
      font-weight: bold;
      padding: 0.8rem;
      font-size: 1.1rem;
    }

    .linha {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr;
      gap: 0.5rem;
      align-items: center;
      padding: 0.8rem;
      background: #f0f0f0;
    }

    .linha:nth-child(even) {
      background: #e0e0e0;
    }

    .nome {
      font-weight: bold;
      font-size: 1.1rem;
    }

    .ponto, .set {
      font-size: 2rem;
      font-weight: bold;
      text-align: center;
      border-radius: 8px;
      padding: 0.5rem;
      color: var(--cor-txt-inv);
    }

    .ponto {
      background: var(--cor2);
    }

    .set {
      background: var(--cor-set);
      color: #000;
    }

    .ativo {
      animation: destaque 0.3s ease;
      transform: scale(1.05);
    }

    @keyframes destaque {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .tiebreak {
      background-color: var(--cor-tiebreak) !important;
      color: white !important;
      animation: pisca 1s infinite;
    }

    @keyframes pisca {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }

    .break {
      text-align: center;
      background: #ffc107;
      color: #000;
      font-weight: bold;
      padding: 0.3rem;
      display: none;
    }
  </style>
</head>
<body>
  <div class="placar">
    <div class="topo" id="topText">Final Feminina - Etapa Ver√£o</div>
    
    <div class="linha" id="linha1">
      <div class="nome" id="nome1">DUPLA A</div>
      <div class="ponto" id="ponto1">0</div>
      <div class="set" id="set1">0</div>
    </div>
    <div class="linha" id="linha2">
      <div class="nome" id="nome2">DUPLA B</div>
      <div class="ponto" id="ponto2">0</div>
      <div class="set" id="set2">0</div>
    </div>

    <div class="break" id="breakInfo">BREAK POINT!</div>

    <div class="rodape" id="bottomText">COPA ARENA SUNSET 2025</div>
  </div>

  <script>
    const ponto1 = document.getElementById('ponto1');
    const ponto2 = document.getElementById('ponto2');
    const set1 = document.getElementById('set1');
    const set2 = document.getElementById('set2');
    const nome1 = document.getElementById('nome1');
    const nome2 = document.getElementById('nome2');
    const linha1 = document.getElementById('linha1');
    const linha2 = document.getElementById('linha2');
    const topText = document.getElementById('topText');
    const bottomText = document.getElementById('bottomText');
    const breakInfo = document.getElementById('breakInfo');

    function animar(el) {
      el.classList.add('ativo');
      setTimeout(() => el.classList.remove('ativo'), 300);
    }

    function verificarTieBreak() {
      const s1 = parseInt(set1.textContent);
      const s2 = parseInt(set2.textContent);
      const tie = s1 === 1 && s2 === 1;
      linha1.classList.toggle('tiebreak', tie);
      linha2.classList.toggle('tiebreak', tie);
    }

    const canal = new BroadcastChannel('beachTennisScore');

    canal.onmessage = ({ data }) => {
      if (data.type === 'name') {
        if (data.team === 1) nome1.textContent = data.value;
        if (data.team === 2) nome2.textContent = data.value;
      }
      if (data.type === 'points') {
        if (data.team === 1) {
          ponto1.textContent = data.value;
          animar(ponto1);
        } else {
          ponto2.textContent = data.value;
          animar(ponto2);
        }
      }
      if (data.type === 'sets') {
        if (data.team === 1) {
          set1.textContent = data.value;
          animar(set1);
        } else {
          set2.textContent = data.value;
          animar(set2);
        }
        verificarTieBreak();
      }
      if (data.type === 'topText') topText.textContent = data.value;
      if (data.type === 'bottomText') bottomText.textContent = data.value;

      if (data.type === 'breakPoint') {
        breakInfo.style.display = data.value ? 'block' : 'none';
      }
    };
  </script>
</body>
</html>
