<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Placar Beach Tennis</title>
  <style>
    /* Estilos mantidos conforme solicitado */
    @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap');

    :root {
      --cor-fundo: #222;
      --cor-texto: #eee;
      --cor-container: #333;
      --cor-texto-topo: #39ff14;
      --cor-fundo-topo: #000c60;
      --cor-fundo-categoria: #39ff14;
      --cor-texto-categoria: #000c60;
      --cor-texto-circuito: #000c60;
      --cor-nome-fundo: #fff;
      --cor-nome-texto: #000c60;
      --cor-marcador1-fundo: #000c60;
      --cor-marcador1-texto: #39ff14;
      --cor-marcador2-fundo: #fff;
      --cor-marcador2-texto: #000c60;
      --cor-fundo-inferior: #add8e6;
      --cor-texto-inferior: #000c60;
      --tamanho-fonte-nome: 1.6em;
      --tamanho-fonte-numeros: 3em;
      --tamanho-fonte-sets: 3em;
      --tamanho-fonte-cronometro: 2em;
      --tamanho-fonte-categoria: 1.6em;
      --tamanho-fonte-circuito: 1em;
      --largura-placar: 700px;
      --padding-placar: 20px;
      --espacamento-colunas: 3fr 1fr 1fr;
    }

    body {
      font-family: 'Open Sans', sans-serif;
      margin: 0;
      background-color: var(--cor-fundo);
      color: var(--cor-texto);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }

    .scoreboard-container {
      background-color: var(--cor-container);
      color: var(--cor-texto);
      border-radius: 10px;
      box-shadow: 4px 4px 20px rgba(0, 0, 0, 0.4);
      width: var(--largura-placar);
      padding: var(--padding-placar);
      display: grid;
      grid-template-rows: auto auto 1fr auto auto;
      grid-template-columns: 1fr;
    }

    .top-bar {
      display: grid;
      grid-template-columns: 3fr 2fr;
      border-bottom: 1px solid #555;
    }

    .cronometro-container, .categoria-container {
      padding: 10px 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .cronometro-container {
      background-color: var(--cor-fundo-topo);
      color: var(--cor-texto-topo);
    }

    .categoria-container {
      background-color: var(--cor-fundo-categoria);
      color: var(--cor-texto-categoria);
    }

    .team-row {
      display: grid;
      grid-template-columns: var(--espacamento-colunas);
      background-color: #fff;
      align-items: center;
    }

    .team-row:nth-child(2) {
      border-bottom: 2px solid var(--cor-fundo-inferior);
      margin-bottom: 5px;
    }

    .team-names-container {
      background-color: var(--cor-nome-fundo);
      color: var(--cor-nome-texto);
      padding: 8px;
      border-radius: 5px;
      font-weight: bold;
      font-size: var(--tamanho-fonte-nome);
      text-align: left;
      display: flex;
      flex-direction: column;
      position: relative;
    }

    .team-names-container.serving::before {
      content: "➤ ";
      color: green;
      font-size: var(--tamanho-fonte-nome);
      position: absolute;
      left: -15px;
      top: 50%;
      transform: translateY(-50%);
    }

    .points-button {
      background-color: var(--cor-marcador1-fundo);
      color: var(--cor-marcador1-texto);
      font-family: 'Roboto Mono', monospace;
      font-size: var(--tamanho-fonte-numeros);
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100%;
      margin: 2px;
    }

    .sets-container {
      background-color: var(--cor-marcador2-fundo);
      color: var(--cor-marcador2-texto);
      font-family: 'Roboto Mono', monospace;
      font-size: var(--tamanho-fonte-sets);
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 5px;
      margin: 2px;
    }

    .bottom-bar {
      background-color: var(--cor-fundo-inferior);
      color: var(--cor-texto-inferior);
      padding: 10px 20px;
      text-align: left;
      font-size: var(--tamanho-fonte-circuito);
      border-top: 1px solid #555;
      display: flex;
      align-items: center;
    }

    .break-point-indicator {
      display: none;
      background-color: #ff4444;
      color: #fff;
      font-weight: bold;
      font-size: var(--tamanho-fonte-cronometro);
      padding: 10px;
      text-align: center;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <div class="scoreboard-container">
    <div class="top-bar">
      <div class="cronometro-container" id="cronometro-area"><span id="cronometro">00:00</span></div>
      <div class="categoria-container"><span id="categoria-text">FEMININO D</span></div>
    </div>

    <div class="team-row">
      <div class="team-names-container" id="team1-name"><span>DIDÁ / GESIENE</span></div>
      <div class="points-button" id="team1-points">0</div>
      <div class="sets-container" id="team1-sets">0</div>
    </div>
    <div class="team-row">
      <div class="team-names-container" id="team2-name"><span>MATHEUS / ANA PAULA</span></div>
      <div class="points-button" id="team2-points">0</div>
      <div class="sets-container" id="team2-sets">0</div>
    </div>

    <div class="bottom-bar">
      <strong><span id="circuito-text">CIRCUITO ARENA BEACH</span></strong>
    </div>

    <div class="break-point-indicator" id="break-point-area">BREAK POINT</div>
  </div>

  <script>
    const channel = new BroadcastChannel('beachTennisScore');
    const cronometroElement = document.getElementById('cronometro');
    const breakPointAreaElement = document.getElementById('break-point-area');
    const cronometroAreaElement = document.getElementById('cronometro-area');
    let segundos = 0;
    let cronometroInterval;

    function startCronometro() {
      clearInterval(cronometroInterval);
      cronometroInterval = setInterval(() => {
        segundos++;
        const m = String(Math.floor(segundos / 60)).padStart(2, '0');
        const s = String(segundos % 60).padStart(2, '0');
        cronometroElement.textContent = `${m}:${s}`;
      }, 1000);
    }

    function stopCronometro() {
      clearInterval(cronometroInterval);
      segundos = 0;
      cronometroElement.textContent = '00:00';
    }

    channel.onmessage = ({ data }) => {
      switch(data.type) {
        case 'name':
          const [p1, p2] = data.value.split('/');
          const element = data.team === 1 ? 'team1-name' : 'team2-name';
          document.getElementById(element).innerHTML = `<span>${p1}</span><span>${p2}</span>`;
          break;
        case 'points':
          document.getElementById(`team${data.team}-points`).textContent = data.value;
          break;
        case 'sets':
          document.getElementById(`team${data.team}-sets`).textContent = data.value;
          break;
        case 'topText':
          document.getElementById('categoria-text').textContent = data.value;
          break;
        case 'bottomText':
          document.getElementById('circuito-text').textContent = data.value;
          break;
        case 'breakPoint':
          if (data.value) {
            breakPointAreaElement.style.display = 'block';
            cronometroAreaElement.style.display = 'none';
          } else {
            breakPointAreaElement.style.display = 'none';
            cronometroAreaElement.style.display = 'flex';
          }
          break;
        case 'serving':
          document.getElementById('team1-name').classList.toggle('serving', data.team === 1);
          document.getElementById('team2-name').classList.toggle('serving', data.team === 2);
          break;
      }

      if (data.action === 'startTimer') startCronometro();
      if (data.action === 'stopTimer') stopCronometro();
      if (data.action === 'resetScore') {
        document.getElementById('team1-points').textContent = '0';
        document.getElementById('team2-points').textContent = '0';
        document.getElementById('team1-sets').textContent = '0';
        document.getElementById('team2-sets').textContent = '0';
        stopCronometro();
      }
    };
  </script>
</body>
</html>